<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Snake & Ladder Adventure</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            overflow: hidden;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            color: white;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        header {
            background: rgba(0, 0, 0, 0.7);
            padding: 1rem;
            text-align: center;
            border-bottom: 3px solid #f1c40f;
        }
        
        h1 {
            font-size: 2.5rem;
            color: #f1c40f;
            text-shadow: 0 0 10px rgba(241, 196, 15, 0.7);
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #ecf0f1;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .container {
            display: flex;
            flex: 1;
            padding: 1rem;
            gap: 1rem;
        }
        
        #gameCanvas {
            flex: 1;
            border-radius: 10px;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.7);
            background: rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        .controls {
            width: 300px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 10px;
            padding: 1.5rem;
            border: 2px solid #3498db;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .panel {
            background: rgba(25, 42, 86, 0.8);
            border-radius: 8px;
            padding: 1.2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        h2 {
            color: #f1c40f;
            margin-bottom: 1rem;
            text-align: center;
            font-size: 1.5rem;
        }
        
        .dice-container {
            display: flex;
            justify-content: center;
            margin: 1rem 0;
        }
        
        .dice {
            width: 80px;
            height: 80px;
            background: #ecf0f1;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
            font-weight: bold;
            color: #2c3e50;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .dice:hover {
            transform: scale(1.05);
            background: #f1c40f;
        }
        
        .dice.rolling {
            animation: roll 0.5s infinite;
        }
        
        @keyframes roll {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .players {
            display: flex;
            justify-content: space-around;
            margin-top: 1rem;
        }
        
        .player {
            text-align: center;
            padding: 0.8rem;
            border-radius: 8px;
            background: rgba(52, 152, 219, 0.2);
            transition: all 0.3s ease;
        }
        
        .player.active {
            background: rgba(46, 204, 113, 0.4);
            box-shadow: 0 0 15px rgba(46, 204, 113, 0.7);
            transform: scale(1.05);
        }
        
        .player-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 12px;
            font-size: 1.1rem;
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
            font-weight: bold;
        }
        
        .btn:hover {
            background: linear-gradient(to right, #f1c40f, #f39c12);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .game-info {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 8px;
            height: 120px;
            overflow-y: auto;
        }
        
        .game-info p {
            margin: 0.5rem 0;
            padding: 0.3rem;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.2);
        }
        
        .features {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-top: 1rem;
            justify-content: center;
        }
        
        .feature {
            background: rgba(231, 76, 60, 0.2);
            padding: 0.5rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            border: 1px solid #e74c3c;
        }
        
        footer {
            text-align: center;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.7);
            font-size: 0.9rem;
            color: #bdc3c7;
        }
        
        .win-celebration {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            display: none;
        }
        
        .win-celebration h2 {
            font-size: 4rem;
            color: #f1c40f;
            text-shadow: 0 0 20px rgba(241, 196, 15, 0.8);
            margin-bottom: 2rem;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f1c40f;
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <header>
        <h1>3D Snake & Ladder Adventure</h1>
        <p class="subtitle">Climb ladders, avoid snakes, and use ropeways to reach the celebration stage! Roll the dice and be the first to reach position 100.</p>
    </header>
    
    <div class="container">
        <div id="gameCanvas"></div>
        
        <div class="controls">
            <div class="panel">
                <h2>Game Controls</h2>
                <div class="dice-container">
                    <div class="dice" id="dice">?</div>
                </div>
                <button class="btn" id="rollBtn">Roll Dice</button>
                <button class="btn" id="resetBtn">Reset Game</button>
            </div>
            
            <div class="panel">
                <h2>Players</h2>
                <div class="players">
                    <div class="player active" id="player1">
                        <div class="player-icon">üë®‚Äçüíº</div>
                        <div>Player 1</div>
                        <div>Position: <span id="pos1">1</span></div>
                    </div>
                    <div class="player" id="player2">
                        <div class="player-icon">üë©‚Äçüî¨</div>
                        <div>Player 2</div>
                        <div>Position: <span id="pos2">1</span></div>
                    </div>
                </div>
            </div>
            
            <div class="panel">
                <h2>Game Info</h2>
                <div class="game-info" id="gameInfo">
                    <p>Player 1 starts the game! Roll the dice.</p>
                </div>
            </div>
            
            <div class="panel">
                <h2>Game Features</h2>
                <div class="features">
                    <div class="feature">3D Game Board</div>
                    <div class="feature">Grassy Terrain</div>
                    <div class="feature">Sand Hills</div>
                    <div class="feature">Snakes & Ladders</div>
                    <div class="feature">Ropeways</div>
                    <div class="feature">Celebration Stage</div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="win-celebration" id="winCelebration">
        <h2 id="winnerText">Player 1 Wins!</h2>
        <button class="btn" id="playAgainBtn">Play Again</button>
    </div>
    
    <footer>
        <p>3D Snake & Ladder Game | Created with Three.js | Use the dice to move your player token</p>
    </footer>

    <script>
        // Initialize Three.js
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x87CEEB);
        scene.fog = new THREE.Fog(0x87CEEB, 10, 100);
        
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / (window.innerHeight - 200), 0.1, 1000);
        camera.position.set(0, 20, 30);
        
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(document.getElementById('gameCanvas').offsetWidth, 
                         document.getElementById('gameCanvas').offsetHeight);
        renderer.shadowMap.enabled = true;
        document.getElementById('gameCanvas').appendChild(renderer.domElement);
        
        // Lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
        scene.add(ambientLight);
        
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(20, 30, 20);
        directionalLight.castShadow = true;
        directionalLight.shadow.mapSize.width = 1024;
        directionalLight.shadow.mapSize.height = 1024;
        scene.add(directionalLight);
        
        // Game state
        const gameState = {
            currentPlayer: 1,
            positions: [1, 1], // Player positions
            gameActive: true,
            diceValue: 0
        };
        
        // Create game board
        function createGameBoard() {
            // Grassy ground
            const groundGeometry = new THREE.PlaneGeometry(100, 100, 50, 50);
            const groundMaterial = new THREE.MeshLambertMaterial({ 
                color: 0x4CAF50,
                wireframe: false
            });
            const ground = new THREE.Mesh(groundGeometry, groundMaterial);
            ground.rotation.x = -Math.PI / 2;
            ground.position.y = -1;
            ground.receiveShadow = true;
            scene.add(ground);
            
            // Create sand hills
            const hillGeometry = new THREE.ConeGeometry(5, 3, 32);
            const hillMaterial = new THREE.MeshLambertMaterial({ color: 0xF4D03F });
            
            for (let i = 0; i < 8; i++) {
                const hill = new THREE.Mesh(hillGeometry, hillMaterial);
                hill.position.set(
                    Math.random() * 80 - 40,
                    0,
                    Math.random() * 80 - 40
                );
                hill.castShadow = true;
                hill.receiveShadow = true;
                scene.add(hill);
            }
            
            // Create pathway
            const pathGeometry = new THREE.BoxGeometry(70, 0.5, 10);
            const pathMaterial = new THREE.MeshLambertMaterial({ color: 0x8B4513 });
            const path = new THREE.Mesh(pathGeometry, pathMaterial);
            path.position.y = 0;
            path.receiveShadow = true;
            scene.add(path);
            
            // Create positions on the path
            const positionGeometry = new THREE.SphereGeometry(0.5, 16, 16);
            const positionMaterial = new THREE.MeshLambertMaterial({ color: 0x3498DB });
            
            for (let i = 0; i < 10; i++) {
                for (let j = 0; j < 10; j++) {
                    const pos = new THREE.Mesh(positionGeometry, positionMaterial);
                    pos.position.set(-30 + j * 7, 0.5, -4 + i * 0.8);
                    pos.castShadow = true;
                    scene.add(pos);
                }
            }
            
            // Create snakes
            const snakeGeometry = new THREE.CylinderGeometry(0.3, 0.3, 10, 32);
            const snakeMaterial = new THREE.MeshLambertMaterial({ color: 0x2ECC71 });
            
            for (let i = 0; i < 3; i++) {
                const snake = new THREE.Mesh(snakeGeometry, snakeMaterial);
                snake.position.set(10 + i * 5, 5, 0);
                snake.rotation.z = Math.PI / 2;
                snake.castShadow = true;
                scene.add(snake);
            }
            
            // Create ladders
            const ladderGeometry = new THREE.BoxGeometry(0.5, 8, 0.5);
            const ladderMaterial = new THREE.MeshLambertMaterial({ color: 0xE74C3C });
            
            for (let i = 0; i < 3; i++) {
                const ladderSide1 = new THREE.Mesh(ladderGeometry, ladderMaterial);
                ladderSide1.position.set(-15, 4, -5 + i * 5);
                scene.add(ladderSide1);
                
                const ladderSide2 = new THREE.Mesh(ladderGeometry, ladderMaterial);
                ladderSide2.position.set(-10, 4, -5 + i * 5);
                scene.add(ladderSide2);
                
                for (let j = 0; j < 4; j++) {
                    const rung = new THREE.Mesh(
                        new THREE.BoxGeometry(5, 0.3, 0.3),
                        ladderMaterial
                    );
                    rung.position.set(-12.5, j * 2, -5 + i * 5);
                    scene.add(rung);
                }
            }
            
            // Create ropeways
            const ropewayGeometry = new THREE.CylinderGeometry(0.1, 0.1, 20, 8);
            const ropewayMaterial = new THREE.MeshLambertMaterial({ color: 0xF1C40F });
            
            for (let i = 0; i < 2; i++) {
                const ropeway = new THREE.Mesh(ropewayGeometry, ropewayMaterial);
                ropeway.position.set(20, 8, -10 + i * 15);
                ropeway.rotation.z = Math.PI / 2;
                ropeway.castShadow = true;
                scene.add(ropeway);
                
                // Ropeway cart
                const cart = new THREE.Mesh(
                    new THREE.BoxGeometry(2, 1, 1),
                    new THREE.MeshLambertMaterial({ color: 0x9B59B6 })
                );
                cart.position.set(20, 8, -10 + i * 15);
                scene.add(cart);
            }
            
            // Create celebration stage
            const stageGeometry = new THREE.BoxGeometry(15, 1, 15);
            const stageMaterial = new THREE.MeshLambertMaterial({ color: 0x9B59B6 });
            const stage = new THREE.Mesh(stageGeometry, stageMaterial);
            stage.position.set(0, 0.5, 30);
            stage.receiveShadow = true;
            scene.add(stage);
            
            const poleGeometry = new THREE.CylinderGeometry(0.3, 0.3, 8, 16);
            const poleMaterial = new THREE.MeshLambertMaterial({ color: 0x3498DB });
            
            for (let i = -1; i <= 1; i += 2) {
                for (let j = -1; j <= 1; j += 2) {
                    const pole = new THREE.Mesh(poleGeometry, poleMaterial);
                    pole.position.set(i * 6, 4, j * 6 + 30);
                    scene.add(pole);
                }
            }
            
            const roofGeometry = new THREE.ConeGeometry(10, 3, 4);
            const roofMaterial = new THREE.MeshLambertMaterial({ color: 0xE74C3C });
            const roof = new THREE.Mesh(roofGeometry, roofMaterial);
            roof.position.set(0, 8, 30);
            roof.rotation.y = Math.PI / 4;
            scene.add(roof);
            
            // Create player tokens
            const player1Geometry = new THREE.CylinderGeometry(1, 1, 1, 32);
            const player1Material = new THREE.MeshLambertMaterial({ color: 0x3498DB });
            const player1 = new THREE.Mesh(player1Geometry, player1Material);
            player1.position.set(-30, 1, -4);
            player1.name = "player1";
            scene.add(player1);
            
            const player2Geometry = new THREE.CylinderGeometry(1, 1, 1, 32);
            const player2Material = new THREE.MeshLambertMaterial({ color: 0xE74C3C });
            const player2 = new THREE.Mesh(player2Geometry, player2Material);
            player2.position.set(-30, 1, -5.5);
            player2.name = "player2";
            scene.add(player2);
        }
        
        // Initialize the game board
        createGameBoard();
        
        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }
        
        animate();
        
        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = document.getElementById('gameCanvas').offsetWidth / 
                            document.getElementById('gameCanvas').offsetHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(document.getElementById('gameCanvas').offsetWidth, 
                            document.getElementById('gameCanvas').offsetHeight);
        });
        
        // Game logic
        const dice = document.getElementById('dice');
        const rollBtn = document.getElementById('rollBtn');
        const resetBtn = document.getElementById('resetBtn');
        const playAgainBtn = document.getElementById('playAgainBtn');
        const winCelebration = document.getElementById('winCelebration');
        const winnerText = document.getElementById('winnerText');
        const gameInfo = document.getElementById('gameInfo');
        
        // Roll the dice
        rollBtn.addEventListener('click', rollDice);
        dice.addEventListener('click', rollDice);
        
        function rollDice() {
            if (!gameState.gameActive) return;
            
            dice.classList.add('rolling');
            dice.textContent = '...';
            
            setTimeout(() => {
                const value = Math.floor(Math.random() * 6) + 1;
                gameState.diceValue = value;
                dice.textContent = value;
                dice.classList.remove('rolling');
                
                movePlayer(value);
            }, 800);
        }
        
        // Move the player
        function movePlayer(steps) {
            const playerIndex = gameState.currentPlayer - 1;
            gameState.positions[playerIndex] += steps;
            
            // Update UI
            document.getElementById(`pos${gameState.currentPlayer}`).textContent = 
                gameState.positions[playerIndex];
            
            // Add game info
            const info = document.createElement('p');
            info.textContent = `Player ${gameState.currentPlayer} rolled ${steps} and moved to position ${gameState.positions[playerIndex]}`;
            gameInfo.appendChild(info);
            gameInfo.scrollTop = gameInfo.scrollHeight;
            
            // Move 3D token
            moveToken(gameState.currentPlayer, gameState.positions[playerIndex]);
            
            // Check for win
            if (gameState.positions[playerIndex] >= 100) {
                endGame(gameState.currentPlayer);
                return;
            }
            
            // Check for snakes, ladders, and ropeways
            checkSpecialPositions(gameState.positions[playerIndex], gameState.currentPlayer);
            
            // Switch player
            gameState.currentPlayer = gameState.currentPlayer === 1 ? 2 : 1;
            
            // Update active player UI
            document.getElementById('player1').classList.toggle('active');
            document.getElementById('player2').classList.toggle('active');
            
            // Add game info for next player
            const nextInfo = document.createElement('p');
            nextInfo.textContent = `Player ${gameState.currentPlayer}'s turn`;
            nextInfo.style.color = '#f1c40f';
            nextInfo.style.fontWeight = 'bold';
            gameInfo.appendChild(nextInfo);
            gameInfo.scrollTop = gameInfo.scrollHeight;
        }
        
        // Move the 3D token
        function moveToken(player, position) {
            // Simplified movement - in a real game, this would animate along the path
            const token = scene.getObjectByName(`player${player}`);
            
            // Calculate position on board
            const row = Math.floor((position - 1) / 10);
            const col = (position - 1) % 10;
            
            let posX, posZ;
            
            if (row % 2 === 0) {
                // Left to right
                posX = -30 + col * 7;
            } else {
                // Right to left
                posX = -30 + (9 - col) * 7;
            }
            
            posZ = -4 + row * 0.8;
            
            // Animate movement
            gsap.to(token.position, {
                x: posX,
                z: posZ,
                duration: 1,
                ease: "power2.out",
                yoyo: false,
                repeat: 0
            });
        }
        
        // Check for special positions
        function checkSpecialPositions(position, player) {
            // Snakes
            if (position === 25) {
                gameState.positions[player - 1] = 10;
                addSpecialMessage(player, "snake", 25, 10);
            } else if (position === 55) {
                gameState.positions[player - 1] = 40;
                addSpecialMessage(player, "snake", 55, 40);
            } else if (position === 85) {
                gameState.positions[player - 1] = 65;
                addSpecialMessage(player, "snake", 85, 65);
            }
            
            // Ladders
            else if (position === 12) {
                gameState.positions[player - 1] = 30;
                addSpecialMessage(player, "ladder", 12, 30);
            } else if (position === 35) {
                gameState.positions[player - 1] = 60;
                addSpecialMessage(player, "ladder", 35, 60);
            } else if (position === 70) {
                gameState.positions[player - 1] = 90;
                addSpecialMessage(player, "ladder", 70, 90);
            }
            
            // Ropeways
            else if (position === 42) {
                gameState.positions[player - 1] = 58;
                addSpecialMessage(player, "ropeway", 42, 58);
            } else if (position === 75) {
                gameState.positions[player - 1] = 82;
                addSpecialMessage(player, "ropeway", 75, 82);
            }
            
            // Update position display
            document.getElementById(`pos${player}`).textContent = 
                gameState.positions[player - 1];
            
            // Move token to new position
            moveToken(player, gameState.positions[player - 1]);
        }
        
        function addSpecialMessage(player, type, from, to) {
            const message = document.createElement('p');
            let typeText, emoji;
            
            if (type === "snake") {
                typeText = "üêç Oh no! A snake!";
                emoji = "üêç";
            } else if (type === "ladder") {
                typeText = "ü™ú Yay! A ladder!";
                emoji = "ü™ú";
            } else {
                typeText = "üö° Woohoo! A ropeway!";
                emoji = "üö°";
            }
            
            message.innerHTML = `Player ${player} hit a ${type} at position ${from} ${emoji} and moved to ${to}`;
            message.style.color = type === "snake" ? '#e74c3c' : '#2ecc71';
            gameInfo.appendChild(message);
            gameInfo.scrollTop = gameInfo.scrollHeight;
        }
        
        // End game
        function endGame(winner) {
            gameState.gameActive = false;
            winnerText.textContent = `Player ${winner} Wins!`;
            winCelebration.style.display = 'flex';
            
            // Create confetti
            createConfetti();
        }
        
        // Create celebration confetti
        function createConfetti() {
            const colors = ['#f1c40f', '#e74c3c', '#3498db', '#2ecc71', '#9b59b6'];
            
            for (let i = 0; i < 150; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = Math.random() * 100 + 'vh';
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                winCelebration.appendChild(confetti);
                
                // Animate confetti falling
                gsap.to(confetti, {
                    y: '100vh',
                    opacity: 0,
                    duration: Math.random() * 3 + 2,
                    delay: Math.random() * 0.5,
                    ease: "power1.out",
                    onComplete: () => {
                        confetti.remove();
                    }
                });
            }
        }
        
        // Reset game
        resetBtn.addEventListener('click', resetGame);
        playAgainBtn.addEventListener('click', resetGame);
        
        function resetGame() {
            gameState.currentPlayer = 1;
            gameState.positions = [1, 1];
            gameState.gameActive = true;
            
            // Reset UI
            document.getElementById('pos1').textContent = '1';
            document.getElementById('pos2').textContent = '1';
            document.getElementById('player1').classList.add('active');
            document.getElementById('player2').classList.remove('active');
            
            // Clear game info
            gameInfo.innerHTML = '<p>Game reset! Player 1 starts.</p>';
            
            // Hide win celebration
            winCelebration.style.display = 'none';
            
            // Reset dice
            dice.textContent = '?';
            
            // Reset tokens
            const player1 = scene.getObjectByName('player1');
            const player2 = scene.getObjectByName('player2');
            
            if (player1) {
                player1.position.set(-30, 1, -4);
            }
            
            if (player2) {
                player2.position.set(-30, 1, -5.5);
            }
        }
    </script>
</body>
</html>